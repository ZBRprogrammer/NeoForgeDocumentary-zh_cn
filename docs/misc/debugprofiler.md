# **调试分析器**(`Debug Profiler`)

Minecraft 提供调试分析器，可收集系统数据、游戏设置、JVM 数据、世界数据及端侧刻信息，用于定位耗时代码。对于分析 `TickEvent` 或 `BlockEntities` 刻处理等场景，该工具对模组开发者及服务器管理员排查卡顿源头非常有用。

## 使用调试分析器

调试分析器操作简单：
1. 按下调试快捷键 `F3 + L` 启动分析器
2. 10 秒后自动停止（或再次按快捷键提前停止）

:::note
仅能分析实际执行的代码路径。需分析的 `Entity` 和 `BlockEntity` 必须存在于世界中才能显示结果。
:::

分析结束后，会在运行目录的 `debug/profiling` 子目录生成压缩包，文件名格式为 `yyyy-mm-dd_hh_mi_ss-世界名-版本号.zip`。

## 解读分析结果

在 `client` 和 `server` 端侧文件夹中，`profiling.txt` 文件包含结果数据。顶部显示分析持续毫秒数及期间运行的刻数。

下方信息示例如下：
```
[00] levels - 96.70%/96.70%
[01] |   Level Name - 99.76%/96.47%
[02] |   |   tick - 99.31%/95.81%
[03] |   |   |   entities - 47.72%/45.72%
[04] |   |   |   |   regular - 98.32%/44.95%
[04] |   |   |   |   blockEntities - 0.90%/0.41%
[05] |   |   |   |   |   unspecified - 64.26%/0.26%
[05] |   |   |   |   |   minecraft:furnace - 33.35%/0.14%
[05] |   |   |   |   |   minecraft:chest - 2.39%/0.01%
```

各列含义解析：

| [02]      | tick             | 99.31%        | 95.81%        |
| :-------- | :--------------- | :------------ | :------------ |
| 分区深度  | 分区名称         | 占父级时间比（第0层为单刻耗时比） | 占总刻时间比  |

## 分析自定义代码

调试分析器原生支持 `Entity` 和 `BlockEntity`。如需分析其他代码，需手动创建分区：

```java
Profiler.get().push("yourSectionName");
//要分析的代码
Profiler.get().pop();
```

随后在结果文件中搜索分区名称即可。